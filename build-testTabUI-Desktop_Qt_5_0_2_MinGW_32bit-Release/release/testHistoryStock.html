                    <!-- 用来获取股票历史行情 -->
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Hello</title>
    <script src="http://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/flot/0.8.2/jquery.flot.min.js"></script>
    <link href="css/" rel="stylesheet">
</head>
<body>


代码000048  从20140523到20140701  的历史价格数据，使用回调函数 historySearchHandler 处理
<br>
用 jquery.flot 插件 实现图标绘制

<div id="main">


</div>


<div id="flot-placeholder" style="width:600px;height:400px; ">

</div>



</body>

<script>

    dataSource = [];
    //根据src创建相应的script
    function addScriptTag(src){
        var script = document.createElement('script');
        script.setAttribute("type","text/javascript");
        script.src = src;
        document.body.appendChild(script);
    }

    function  historySearchHandler( jsonResult ) {

        var json = jsonResult[0];
        var mainContent =   $("#main");
        mainContent.append( "<b>返回状态:</b>" +  json.status + "<br>" );
		 mainContent.append( "<b>历史数据:</b><br>");
        for(var key in json.hq ) {
            var row =  json.hq[key];
            mainContent.append( row + "<br>" );
            dataSource.push(   [key,row[2]]  );
        }
        mainContent.append( "<b>代码:</b>" +  json.code + "<br>" );
        mainContent.append( "<b>总计:</b>" + json.stat + "<br><br>" );

        drawTable();
    }

    //受到数据后画出图表
    function drawTable() {


        var dataset = [
            {
                label: "line1",
                data: dataSource
            }
        ];

        var options = {
            series: {
                lines: { show: true },
                points: {
                    radius: 3,
                    show: true
                }
            }
        };

        $.plot($("#flot-placeholder"), dataset, options);
    }

    //实例:
    // http://q.stock.sohu.com/hisHq?code=cn_000048&start=20140523&end=20140701&stat=1&order=D&period=d&callback=historySearchHandler&rt=jsonp
    // 返回的是 代码000048  从20140523到20140701  的历史数据，使用回调函数 historySearchHandler 处理
    addScriptTag("http://q.stock.sohu.com/hisHq?code=cn_000048&start=20140523&end=20140701&stat=1&order=D&period=d&callback=historySearchHandler&rt=jsonp");






</script>

</html>